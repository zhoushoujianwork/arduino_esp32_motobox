# Air780EG 4G+GNSS模块技术资料

## 模块概述

Air780EG是合宙推出的一款集成4G Cat.1通信和GNSS定位功能的物联网模块，专为需要移动网络连接和精确定位的应用场景设计。

## 核心规格

### 基本参数
- **模块名称**: Air780EG
- **适用区域**: 中国/印度/东南亚
- **封装尺寸**: 17.7×15.8×2.3mm
- **工作温度**: -40°C ~ +85°C
- **供电电压**: 3.3V ~ 4.2V

### 4G网络支持
- **TDD频段**: B34/B38/B39/B40/B41
- **FDD频段**: B1/B3/B5/B8
- **调制方式**: QPSK/16QAM
- **发射功率**: 23dBm±2.7dB
- **占用带宽**:
  - TD LTE: ≤20/15/10/5 MHz
  - FDD LTE: ≤20/15/10/5/3/1.4 MHz

### GNSS定位功能
- **支持系统**: GPS + 北斗双模
- **频段支持**:
  - GPS L1 band (中心频点 1575.42MHz)
  - 北斗 B1 band (中心频点 1561.098MHz)
  - GLONASS L1 band (中心频点 1602.5625MHz)
- **通道数**: 64通道同时跟踪
- **数据更新速率**: 1Hz (默认，可配置2Hz/5Hz/10Hz)
- **启动模式**: 支持冷启动、热启动
- **辅助定位**: 支持AGNSS
- **北斗支持**: 北斗二号/三号卫星

## 硬件接口

### GNSS相关引脚
- **GNSS_ANT**: GNSS天线接口
- **GNSS_VCC**: 有源天线供电 (3.3V输出)
- **1PPS**: 秒脉冲输出 (可选)

### 天线设计要求
1. **阻抗匹配**: 50欧姆阻抗匹配
2. **传输线**: 尽量短，建议预留Π形匹配电路
3. **PCB设计**: 天线下方不走线，做漏铜处理作为反射面
4. **干扰隔离**: 天线周边避免DCDC等干扰源
5. **有源天线**: 支持3.3V有源天线，5V天线需外置供电

## 开发方式

### AT指令开发
- 支持标准AT指令集
- 提供完整的AT指令手册
- 适合快速原型开发和简单应用

### LuatOS二次开发
- 基于Lua脚本的嵌入式开发
- 丰富的API库支持
- 适合复杂应用逻辑开发

## 与ESP32-S3 MotoBox项目的集成方案

### 硬件连接
```
ESP32-S3 ←→ Air780EG
UART TX  ←→ RXD
UART RX  ←→ TXD
GND      ←→ GND
3.3V     ←→ VCC
GPIO     ←→ PWR_KEY (电源控制)
GPIO     ←→ STATUS (状态指示)
```

### 功能替换对比
| 功能 | 当前方案 | Air780EG方案 | 优势 |
|------|----------|--------------|------|
| 网络连接 | WiFi | 4G Cat.1 | 覆盖范围更广，不依赖WiFi热点 |
| 定位功能 | 无 | GPS+北斗 | 精确定位，支持轨迹记录 |
| 数据传输 | MQTT over WiFi | MQTT over 4G | 移动性更强，连接更稳定 |
| 功耗管理 | WiFi休眠 | 4G休眠 | 支持更深度的休眠模式 |

### 集成优势
1. **移动性**: 摆脱WiFi限制，真正的移动物联网设备
2. **定位精度**: 内置GNSS提供米级定位精度
3. **网络覆盖**: 4G网络覆盖范围远超WiFi
4. **数据可靠性**: 4G网络连接更稳定
5. **功能整合**: 通信+定位一体化解决方案

### 软件集成要点
1. **UART通信**: 使用ESP32-S3的UART与Air780EG通信
2. **AT指令控制**: 通过AT指令控制网络连接和GNSS功能
3. **数据格式**: 统一GPS数据格式，兼容现有的GeoJSON记录
4. **电源管理**: 集成Air780EG的休眠唤醒机制
5. **状态监控**: 监控网络状态和定位状态

## 开发资源

### 官方文档
- [Air780EG产品手册](https://docs.openluat.com/air780eg/)
- [AT指令手册](https://docs.openluat.com/air780eg/at/app/at_command/)
- [硬件设计指南](https://docs.openluat.com/air780eg/at/hardware/design/)
- [GNSS天线设计指导](https://docs.openluat.com/air780eg/luatos/hardware/design/gnssant/)

### 开发工具
- [GPS调试工具 iNavTool](https://cdn.openluat-luatcommunity.openluat.com/attachment/20240816143801749_iNavTool-V4020.7z)
- [轨迹展示工具](https://doc.openluat.com/article/4980)

### 参考设计
- AT开发参考设计原理图
- LuatOS开发参考设计原理图
- 开发板Core_Air780EG使用说明

## 成本和供应链
- **模块成本**: 相比单独的4G模块+GPS模块更具成本优势
- **供应稳定**: 合宙作为国内知名模块厂商，供应链稳定
- **技术支持**: 完善的技术文档和社区支持

## 下一步行动建议

1. **硬件评估**: 获取Air780EG开发板进行功能验证
2. **接口设计**: 设计ESP32-S3与Air780EG的硬件接口
3. **软件适配**: 开发Air780EG的驱动库和AT指令封装
4. **功能测试**: 验证4G连接、GNSS定位和数据传输功能
5. **集成测试**: 将Air780EG集成到现有的MotoBox系统中

这个方案将显著提升ESP32-S3 MotoBox项目的移动性和定位能力，使其成为真正的移动物联网解决方案。
